<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ChessGPT</title>
    <base href="../" />
    <script defer data-domain="chessgpt.ai" src="https://plausible.io/js/script.js"></script>

    <link rel="preload" href="//db.onlinewebfonts.com/t/b10849c899982654fae3f01d02269043.woff2" as="font" type="font/woff2" crossorigin />
    <link rel="preload" href="//db.onlinewebfonts.com/t/831e1f4da157d96bc996f8c9f5f1e578.woff2" as="font" type="font/woff2" crossorigin />

    <link href="//db.onlinewebfonts.com/c/b10849c899982654fae3f01d02269043?family=Emulogic" rel="stylesheet" type="text/css" />
    <link href="//db.onlinewebfonts.com/c/831e1f4da157d96bc996f8c9f5f1e578?family=Pokemon+GB" rel="stylesheet" type="text/css" />

    <link rel="stylesheet" href="/styles.css" />

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2393664069657867" crossorigin="anonymous"></script>

    <link
      rel="stylesheet"
      href="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css"
      integrity="sha384-q94+BZtLrkL1/ohfjR8c6L+A6qzNH9R2hBLwyoAfu3i/WCvQjzL2RQJ3uNHDISdU"
      crossorigin="anonymous"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <!-- Confetti library for victory animation -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
  </head>
  <body>
    <main id="startContainer" class="vh-100 d-flex flex-column">
      <div class="container pt-5">
        <h1 class="text-center my-5 display-1 pt-5">ChessGPT</h1>
        <div class="row">
          <div class="col-lg-9 mx-auto">
            <p class="text-center lead font-monospace fs-3">
              I hooked <mark class="bg-dark text-light">ChatGPT</mark> up with a <mark class="bg-dark text-light">chessboard</mark>. With a bit of creative
              prompt engineering, it can now beat almost any human. Including you.
            </p>
          </div>
        </div>
        <div class="d-flex justify-content-center">
          <button class="btn btn-lg btn-outline-primary rounded-0 font-monospace fs-2 mt-3" id="startAnimation">Oh yeah? Game on</button>
        </div>
      </div>
    </main>

    <div id="container" class="d-none"></div>
    <audio id="audio-element" src="battle-intro.m4a" preload="auto"></audio>
    <audio id="audio-element-metal" src="metal-music.mp3" preload="auto"></audio>

    <section id="chessBoard" class="d-none hidden">
      <!-- <div class="spinner-grow d-none" id="spinner" role="status">
        <span class="visually-hidden">Loading...</span>
      </div> -->

      <img
        id="chatGptLogo"
        class="position-absolute bounce-image"
        style="top: 5%; left: 20%; transition: left 1s ease-in-out 0s"
        src="/chatgpt.png"
        alt="ChatGPT logo"
      />

      <img id="redLogo" class="position-absolute bounce-image" style="top: 75%; left: 80%; transition: left 1s ease-in-out 0s" src="/red.png" alt="Red logo" />

      <div class="d-flex justify-content-center align-items-center vh-100">
        <div id="myBoard" class="hidden border border-dark border-2 brutalist-shadow-sm mx-auto mt-lg-0 mb-5 d-flex justify-content-center"></div>
      </div>
    </section>

    <div class="modal" id="evolutionModal" tabindex="-1">
      <div class="modal-dialog modal-fullscreen">
        <div class="modal-content">
          <div class="modal-body d-flex flex-column justify-content-center align-items-center vh-100">
            <img id="evolutionImage" src="/chatgpt.png" class="mb-5" height="250px" role="presentation" />

            <p id="evolvedStart" class="evolving">What? ChessGPT is evolving</p>
            <p class="d-none evolving" id="evolvedFinal">ChessGPT evolved into Stockfish</p>
            <p class="text-center evolving mt-5"><mark class="smooth-transitions bg-dark text-light p-2" id="elo">ELO: 249</mark></p>
          </div>
        </div>
      </div>
    </div>

    <div class="modal" id="scoreBoard" tabindex="-1">
      <div class="modal-dialog modal-fullscreen">
        <div class="modal-content">
          <div class="modal-body d-flex flex-column justify-content-center align-items-center vh-100">
            <p class="evolving fs-1">ChessGPT: <span id="chessGptScore"></span></p>
            <p class="evolving fs-1">You: <span id="yourScore"></span></p>
            <div class="d-flex flex-row mt-5 evolving">
              <button id="resetBtn" class="btn btn-lg btn-outline-primary mx-2 rounded-0">Try again?</button>
              <button data-bs-dismiss="modal" class="btn btn-lg btn-outline-secondary mx-2 rounded-0">Show the board</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="modal" id="volumeMessage" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Sound on ðŸ”ˆ</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <p>
              This version of ChessGPT requires an audio track, because of reasons. Plug in your favourite headphones if you don't want to annoy people around
              you, or turn down your volume if you hate having fun.
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Game Over Modal -->
    <div class="modal fade" id="gameOverModal" tabindex="-1" data-bs-backdrop="static">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-body d-flex flex-column justify-content-center align-items-center text-center py-5">
            <h2 class="game-over-title" id="gameOverTitle">GAME OVER</h2>
            <p class="game-over-status" id="gameOverStatus"></p>
            <img id="gameOverLogo" class="game-over-logo" src="/chatgpt.png" alt="Game result" />

            <!-- Leaderboard submission -->
            <div id="leaderboardSubmit" class="mt-4 w-100">
              <p class="evolving text-light mb-2" style="font-size: 0.8rem;">Enter name for leaderboard</p>
              <input type="text" id="nicknameInput" class="nickname-input w-100 mb-3" placeholder="Your nickname" maxlength="20" />
              <button id="submitScoreBtn" class="btn btn-outline-warning rounded-0 evolving w-100">Submit Score</button>
            </div>

            <!-- Leaderboard display (shown after submission) -->
            <div id="leaderboardDisplay" class="mt-4 w-100 d-none">
              <h4 class="evolving text-warning mb-3">TOP PLAYERS</h4>
              <div class="leaderboard-container">
                <table class="table table-dark leaderboard-table">
                  <thead>
                    <tr>
                      <th>#</th>
                      <th>Name</th>
                      <th>W</th>
                      <th>L</th>
                      <th>D</th>
                    </tr>
                  </thead>
                  <tbody id="leaderboardBody"></tbody>
                </table>
              </div>
            </div>

            <div class="d-flex flex-row mt-4 evolving gap-2">
              <button id="playAgainBtn" class="btn btn-outline-primary rounded-0">Play Again</button>
              <button data-bs-dismiss="modal" class="btn btn-outline-secondary rounded-0">View Board</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Standalone Leaderboard Modal -->
    <div class="modal fade" id="leaderboardModal" tabindex="-1">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content" style="background-color: rgba(0, 0, 0, 0.95); border: 4px solid #333;">
          <div class="modal-header border-0">
            <h4 class="evolving text-warning">LEADERBOARD</h4>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="leaderboard-container">
              <table class="table table-dark leaderboard-table">
                <thead>
                  <tr>
                    <th>#</th>
                    <th>Name</th>
                    <th>Wins</th>
                    <th>Losses</th>
                    <th>Draws</th>
                  </tr>
                </thead>
                <tbody id="standaloneLeaderboardBody"></tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- View Leaderboard Button (shown on chess board) -->
    <button id="viewLeaderboardBtn" class="btn btn-outline-warning rounded-0 d-none">Leaderboard</button>

    <!-- Resign/Restart Button (shown on chess board) -->
    <button id="resignRestartBtn" class="btn btn-outline-danger rounded-0 d-none">Resign</button>

    <!-- Audio elements for game over sounds -->
    <audio id="audio-victory" src="/victory.mp3" preload="auto"></audio>
    <audio id="audio-defeat" src="/defeat.mp3" preload="auto"></audio>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
      crossorigin="anonymous"
    ></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <script
      src="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.js"
      integrity="sha384-8Vi8VHwn3vjQ9eUHUxex3JSN/NFqUg3QbPyX8kWyb93+8AC/pPWTzj+nHtbC5bxD"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.2/chess.js"
      integrity="sha384-s3XgLpvmHyscVpijnseAmye819Ee3yaGa8NxstkJVyA6nuDFjt59u1QvuEl/mecz"
      crossorigin="anonymous"
    ></script>
    <script async src="/scripts.js?t=1"></script>
  </body>
</html>
